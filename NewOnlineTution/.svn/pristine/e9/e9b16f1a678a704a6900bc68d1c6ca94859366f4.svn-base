
var catList;
var subjectList;
var teacherList;
var idList;
var classList;



// set date format to yyyy-mm-dd
function setDateFormat(){
	$("#date").on('change',function(){
		
		var  d = new Date(document.getElementById("date").value);
		var  dt = d.getDate();
		 var mn = d.getMonth();
		  mn++;
		 
		
		 var yy = d.getFullYear();
		  
		 
		  var newDate=yy + "/"+ mn + "/" +dt ;
		
		  $("#hiddenDate").val(newDate);
		
		
});
}

// set default class category and subject of currant user
function setUserDefaultCategoryAndSubject(){
	
	$("#hiddenTeacherId").val(teacherList[0].teacherId);
	$("#clCategory").val(teacherList[0].clCategoryId);
	$("#hiddenCatId").val(teacherList[0].clCategoryId);
	
	var defaultCategoryId=teacherList[0].clCategoryId;
	var defaultSubjectId=teacherList[0].subjectId;
	var htmlCodes="";
	
	for(var i=0;i<subjectList.length;i++){
		if(subjectList[i].clCategoryId===defaultCategoryId){
			htmlCodes=htmlCodes+"<option  value='"+subjectList[i].subjectId+"'>"+subjectList[i].subjectName+"</option>";
		}
	}
	
	$("#subjects").html(htmlCodes);
	
	$("#subjects").val(defaultSubjectId);
	$("#hiddenSubjectId").val(defaultSubjectId);
}


// get subject according to selected category

function getSubjectByCategoryId(){
	$("#clCategory").on('change',function(){
		var selectedClassCategoryId=parseInt($(this).val());
		
		if(selectedClassCategoryId!=0){
			$("#techers").html("<option value='0'>Teachers</option>");
			
			var htmlCode="<option value='0'>Select Subject</option>";
			
			for(var i=0;i<subjectList.length;i++){
				
				
				if(subjectList[i].clCategoryId==selectedClassCategoryId){
					htmlCode=htmlCode+"<option  value='"+subjectList[i].subjectId+"'>"+subjectList[i].subjectName+"</option>";
				}
			}
			$("#subjects").prop('disabled',false);
			$("#btnFind").prop('disabled',true);
			$("#subjects").html(htmlCode);
		}else{
			
			$("#subjects").prop('disabled',true);
			$("#techers").prop('disabled',true);
			$("#btnFind").prop('disabled',true);
		}
		
	});
	
}

//get Teachers according to class category and subject
function getTeachersByClCategoryIdAndSubjectId(){
	
	$("#subjects").on('change',function(){
		var count=0;
		var selectedSubjectId=parseInt($(this).val());
		if(selectedSubjectId!=0){
			var selectedClassCategoryId=parseInt($("#clCategory").val());
			var htmlCodes="<option value='0'>select teacher</option>";
			
			
			
				for(var i=0;i<teacherList.length;i++){
					
					if(teacherList[i].clCategoryId===selectedClassCategoryId && teacherList[i].subjectId=== selectedSubjectId){
						count++;
						htmlCodes=htmlCodes+"<option  value='"+teacherList[i].teacherId+"'>"+teacherList[i].firstName+" "+teacherList[i].middleName+" "+teacherList[i].lastName+"</option>";
						
						
					}
					
					
					
					
				}
				
				if(count!=0){
					$("#techers").html(htmlCodes);
				}else{
					$("#techers").html("<option value='0'>No Teachers Available</option>");	
				}
				
			
				
				$("#techers").prop('disabled',false);
				$("#btnFind").prop('disabled',true);
			
			
		}else{
			$("#techers").prop('disabled',true);
			
			$("#btnFind").prop('disabled',true);
		}
		
	});
}

function onChangeTeachers(){
	$("#techers").on('change',function(){
		var selectedTeacher=parseInt($(this).val());
		if(selectedTeacher!=0){
			$("#btnFind").prop('disabled',false);
		}else{
			$("#btnFind").prop('disabled',true);
		}
	});
}

//set select box values according to searched ids
function searchIds(){
	
	
	var subjecthtmlCode="";
	var teacherHtmlCodes="";
	
	$("#clCategory").val(idList[0]);
	
	if(idList[0]!=0 && idList[1]!=0 && idList[2]!=0 ){
		$("#btnFind").prop('disabled',false);
		$("#subjects").prop('disabled',false);
		$("#techers").prop('disabled',false);
		for(var j=0;j<subjectList.length;j++){
			if(subjectList[j].clCategoryId===idList[0]){
				subjecthtmlCode=subjecthtmlCode+"<option  value='"+subjectList[j].subjectId+"'>"+subjectList[j].subjectName+"</option>";
			}
		}
		$("#subjects").html(subjecthtmlCode);
		$("#subjects").val(idList[1]);
		
		if(classList.length!=0){
			var teacherHtmlCodes="<option value='0'>select teacher</option>";
		for(var x=0;x<teacherList.length;x++){
			if(teacherList[x].clCategoryId===idList[0] && teacherList[x].subjectId=== idList[1]){
				teacherHtmlCodes=teacherHtmlCodes+"<option  value='"+teacherList[x].teacherId+"'>"+teacherList[x].firstName+" "+teacherList[x].middleName+" "+teacherList[x].lastName+"</option>";
			}
			
		}
		}else{
			$("#noDataMsg").text("No Classes Available").css("color","red").css("text-align","center");
		}
		
		
		$("#techers").html(teacherHtmlCodes);
		$("#techers").val(idList[2]);
	}else{
		$("#subjects").html("<option value='0'>Select Subject</optioin>");
		$("#techers").html("<option value='0'>Select Teacher</optioin>");
	}
	
	
	
	
}

// payment methods section selection
 function onlinePaymentMethodSection(){
	$("#paymentOnlin").on('click',function(){
		$("#onlinePaymentSection").css('display','block');
		$("#uploadBankSlipSection").css('display','none');
	});
}

 function bankDepositMethodSection(){
	$("#paymentBank").on('click',function(){
		$("#onlinePaymentSection").css('display','none');
		$("#uploadBankSlipSection").css('display','block');
	});
}